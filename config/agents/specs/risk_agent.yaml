# Risk Analysis Agent Specification
# Autonomous agent for portfolio risk assessment and prediction

name: RiskAnalysisAgent
version: '1.0'
namespace: fintech.factory.agents
role: "risk_analyst"
requires_human_approval: false

description: |
  Autonomous agent responsible for continuous portfolio risk monitoring,
  prediction of defaults, collection trends, and risk alerts.
  Operates with zero-touch automation using Vibe Solutioning methodology.

primaryResponsibilities:
  - Monitor PAR_90 and RDR_90 metrics continuously
  - Predict collection rate trends using historical data
  - Generate portfolio health scores
  - Alert on risk threshold breaches
  - Analyze portfolio composition and diversification
  - Identify at-risk segments for targeted intervention

knowledgeSources:
  - cascade.loan_status: Live loan performance data
  - cascade.collections: Collection activity tracking
  - cascade.recovery_tracking: Recovery metrics by cohort
  - historical.risk_snapshots: Historical snapshots for trend analysis
  - config.kpis.risk_definitions: Risk KPI definitions

outputFormats:
  - daily_risk_report: Markdown for Slack/email
  - weekly_summary: PDF slides for stakeholders
  - alerts: JSON for alerting systems
  - predictions: CSV for archival

refreshSchedule:
  daily_report: "0 8 * * *"  # 8 AM daily
  weekly_report: "0 9 * * 1"  # 9 AM Mondays
  continuous_monitoring: "*/15 * * * *"  # Every 15 minutes

integrations:
  - slack: slack_notify_alerts
  - email: daily_report_recipients
  - notion: risk_database_sync
  - datadog: metrics_export

dataValidation:
  - check_data_completeness: "95% minimum"
  - check_data_recency: "< 24 hours"
  - check_calculation_consistency: "Match previous period"
  - flag_anomalies: true

thresholds:
  par_90_warning: 3.0
  par_90_critical: 5.0
  collection_rate_warning: 1.5
  rdr_90_below_threshold: 25.0

automationRules:
  - trigger: "PAR_90 > 5.0"
    action: "alert_executives_immediately"
  - trigger: "RDR_90 < 25.0 for 3 consecutive days"
    action: "escalate_to_recovery_team"
  - trigger: "Collection rate < 1.0% for 2 days"
    action: "alert_finance_ops"

auditTrail:
  enabled: true
  trackAllCalculations: true
  includeReason: true
  includeDataVersion: true
