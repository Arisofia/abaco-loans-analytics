name: PR Assignee Check

on:
  pull_request:
    branches: [main]
    types: [opened, reopened, synchronize, ready_for_review]
  workflow_call:

jobs:
  ensure-assignee:
    name: Ensure PR has assignee
    permissions:
      contents: read
      pull-requests: read
    runs-on: ubuntu-latest
    steps:
      - name: Validate assignee
        env:
          ASSIGNEES: ${{ toJson(github.event.pull_request.assignees) }}
        run: |
          if [ -z "$ASSIGNEES" ] || [ "$ASSIGNEES" = "[]" ]; then
            echo "Please assign at least one owner to this pull request before running CI."
            exit 1
          fi
          echo "Assignees present: $ASSIGNEES"
